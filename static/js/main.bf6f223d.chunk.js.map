{"version":3,"sources":["components/Header.js","utils/Api.js","contexts/CurrentUserContext.js","contexts/CardsContext.js","components/Card.js","components/Main.js","components/Footer.js","components/PopupWithForm.js","components/EditProfilePopup.js","components/ImagePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/App.js","serviceWorker.js","index.js"],"names":["Header","className","api","options","this","_url","url","_id","id","Promise","all","getInitialCards","getUserInfo","res","ok","json","reject","Error","status","fetch","headers","authorization","method","then","_getResponceData","name","about","body","JSON","stringify","link","cardId","avatar","CurrentUserContext","React","createContext","arrCards","Card","card","onCardClick","onLikeClick","onDeleteCard","useContext","currentUser","isOwn","owner","cardDeleteButtonClassName","isLiked","likes","some","i","cardLikeButtonClassName","src","alt","onClick","type","Main","onEditProfile","onAddPlace","onEditAvatar","cards","style","backgroundImage","map","item","key","Footer","PopupWithForm","title","children","isOpen","onClose","buttonText","onSubmit","action","noValidate","EditProfilePopup","onUpdateUser","useEffect","setName","setDescription","useState","descriprion","e","preventDefault","value","onChange","target","minLength","maxLength","required","ImagePopup","EditAvatarPopup","onUpdateAvatar","avatarRef","useRef","current","ref","placeholder","AddPlacePopup","setLink","App","setCurrentUser","closeAllPopups","setIsEditProfilePopupOpen","setIsEditAvatarPopupOpen","setIsAddPlacePopupOpen","setSelectedCard","catch","err","console","log","isEditProfilePopupOpen","isAddPlacePopupOpen","isEditAvatarPopupOpen","selectedCard","setNewCards","Provider","setNewAvatar","patchUserInfo","postNewCard","newCard","deleteLikeCard","newCards","c","likeCard","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","error","message"],"mappings":"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","file":"static/js/main.bf6f223d.chunk.js","sourcesContent":["import React from 'react';\r\n// import './Header.css';\r\n\r\nfunction Header() {\r\n    return (\r\n        <header className=\"header\"></header>\r\n    )\r\n}\r\n\r\nexport default Header;","class Api {\r\n  constructor(options) {\r\n    this._url = options.url;\r\n    this._id = options.id;\r\n  }\r\n\r\n  getAppInfo() {\r\n    return Promise.all([this.getInitialCards(), this.getUserInfo()]);\r\n  }\r\n\r\n  _getResponceData(res) {\r\n    if (res.ok) {\r\n      return res.json();\r\n    }\r\n    return Promise.reject(new Error(`Error ${res.status}`));\r\n  }\r\n\r\n  getInitialCards() {\r\n    return fetch(`${this._url}/cards`, {\r\n      headers: {\r\n        authorization: this._id,\r\n      },\r\n\r\n      method: \"GET\",\r\n    }).then(this._getResponceData);\r\n  }\r\n\r\n  getUserInfo() {\r\n    return fetch(`${this._url}/users/me`, {\r\n      headers: {\r\n        authorization: this._id,\r\n      },\r\n\r\n      method: \"GET\",\r\n    }).then(this._getResponceData);\r\n  }\r\n\r\n  patchUserInfo({name, about}) {\r\n    return fetch(`${this._url}/users/me`, {\r\n      headers: {\r\n        authorization: this._id,\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n\r\n      method: \"PATCH\",\r\n\r\n      body: JSON.stringify({\r\n        name: name,\r\n        about: about,\r\n      }),\r\n    }).then(this._getResponceData);\r\n  }\r\n\r\n  postNewCard({name, link}) {\r\n    return fetch(`${this._url}/cards`, {\r\n      headers: {\r\n        authorization: this._id,\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n\r\n      method: \"POST\",\r\n\r\n      body: JSON.stringify({\r\n        name: name,\r\n        link: link,\r\n      }),\r\n    }).then(this._getResponceData);\r\n  }\r\n\r\n  deleteCard(cardId) {\r\n    return fetch(`${this._url}/cards/${cardId}`, {\r\n      headers: {\r\n        authorization: this._id,\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n\r\n      method: \"DELETE\",\r\n\r\n      body: JSON.stringify({\r\n        id: cardId,\r\n      }),\r\n    }).then(this._getResponceData);\r\n  }\r\n\r\n  likeCard(cardId) {\r\n    return fetch(`${this._url}/cards/likes/${cardId}`, {\r\n      headers: {\r\n        authorization: this._id,\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n\r\n      method: \"PUT\",\r\n    }).then(this._getResponceData);\r\n  }\r\n\r\n  deleteLikeCard(cardId) {\r\n    return fetch(`${this._url}/cards/likes/${cardId}`, {\r\n      headers: {\r\n        authorization: this._id,\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n\r\n      method: \"DELETE\",\r\n    }).then(this._getResponceData);\r\n  }\r\n\r\n  setNewAvatar({avatar}) {\r\n    return fetch(`${this._url}/users/me/avatar`, {\r\n      headers: {\r\n        authorization: this._id,\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n\r\n      method: \"PATCH\",\r\n\r\n      body: JSON.stringify({\r\n        avatar: avatar,\r\n      }),\r\n    }).then(this._getResponceData);\r\n  }\r\n}\r\n\r\nexport const api = new Api({\r\n  url: \"https://mesto.nomoreparties.co/v1/cohort-15\",\r\n  id: \"b7f21f02-0f3c-4a3e-ae62-e9761e3102fc\"\r\n})","import React from \"react\";\r\nexport const CurrentUserContext = React.createContext();\r\n\r\n// export { CurrentUserContext };","import React from \"react\";\r\nexport const arrCards = React.createContext();","import React from \"react\";\r\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext.js\";\r\nimport { arrCards } from \"../contexts/CardsContext.js\";\r\n\r\nexport default function Card({ card, onCardClick, onLikeClick, onDeleteCard }) {\r\n  const cards = React.useContext(arrCards);\r\n  function handleClick() {\r\n    onCardClick(card);\r\n  }\r\n\r\n  function handleLikeClick() {\r\n    onLikeClick(card);\r\n  }\r\n\r\n  function handleDeleteCard() {\r\n    onDeleteCard(card);\r\n  }\r\n\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n\r\n  const isOwn = card.owner._id === currentUser._id;\r\n\r\n  const cardDeleteButtonClassName = `${\r\n    isOwn ? \"\" : \"foto-grid__delete-button_invisible\"\r\n  }`;\r\n\r\n  const isLiked = card.likes.some((i) => i._id === currentUser._id);\r\n\r\n  const cardLikeButtonClassName = `${\r\n    isLiked ? \"foto-grid__like-button_true\" : \"\"\r\n  }`;\r\n\r\n  return (\r\n    <div className=\"foto-grid__section\">\r\n      <button className=\"foto-grid__img-button\">\r\n        <img\r\n          src={card.link}\r\n          alt={card.name}\r\n          className=\"foto-grid__image\"\r\n          onClick={handleClick}\r\n        />\r\n      </button>\r\n      <button\r\n        className={`foto-grid__delete-button ${cardDeleteButtonClassName}`}\r\n        onClick={handleDeleteCard}\r\n      ></button>\r\n      <div className=\"foto-grid__card\">\r\n        <h2 className=\"foto-grid__title\">{card.name}</h2>\r\n        <div>\r\n          <button\r\n            type=\"submit\"\r\n            className={`foto-grid__like-button ${cardLikeButtonClassName}`}\r\n            onClick={handleLikeClick}\r\n          ></button>\r\n          <p className=\"foto-grid__like-counter\"></p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { api } from \"../utils/Api.js\";\r\nimport Card from \"./Card.js\";\r\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext.js\";\r\nimport { arrCards } from \"../contexts/CardsContext.js\";\r\n\r\nfunction Main({\r\n  onEditProfile,\r\n  onAddPlace,\r\n  onEditAvatar,\r\n  onCardClick,\r\n  onLikeClick,\r\n  onDeleteCard,\r\n}) {\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n\r\n  const cards = React.useContext(arrCards);\r\n\r\n  return (\r\n    <main>\r\n      <section className=\"profile\">\r\n        <button\r\n          style={{ backgroundImage: `url(${currentUser.avatar})` }}\r\n          className=\"profile__avatar\"\r\n          onClick={onEditAvatar}\r\n        ></button>\r\n        <div className=\"profile__info\">\r\n          <div className=\"profile__info-input\">\r\n            <h1 className=\"profile__name\">{currentUser.name}</h1>\r\n            <p className=\"profile__prof\">{currentUser.about}</p>\r\n          </div>\r\n          <button\r\n            type=\"button\"\r\n            className=\"profile__info-button\"\r\n            onClick={onEditProfile}\r\n          ></button>\r\n        </div>\r\n        <button\r\n          type=\"button\"\r\n          className=\"profile__add-button\"\r\n          onClick={onAddPlace}\r\n        ></button>\r\n      </section>\r\n      <section className=\"foto-grid\">\r\n        {cards.map((item) => (\r\n          <Card\r\n            key={item._id}\r\n            onCardClick={onCardClick}\r\n            onLikeClick={onLikeClick}\r\n            onDeleteCard={onDeleteCard}\r\n            card={item}\r\n          />\r\n        ))}\r\n      </section>\r\n    </main>\r\n  );\r\n}\r\n\r\nexport default Main;\r\n","import React from 'react';\r\n\r\nfunction Footer() {\r\n    return (        \r\n        <footer className=\"footer\">\r\n        <p className=\"footer__author\">&copy; 2020 Mesto Russia</p>\r\n      </footer>\r\n    )\r\n}\r\n\r\nexport default Footer;","import React from \"react\";\r\n\r\nexport default function PopupWithForm({\r\n  title,\r\n  name,\r\n  children,\r\n  isOpen,\r\n  onClose,\r\n  buttonText,\r\n  onSubmit,\r\n}) {\r\n  return (\r\n    <div className={`popup popup_type_${name} ${isOpen && \"popup_open\"} `}>\r\n      <div className=\"popup__container\">\r\n        <button\r\n          type=\"button\"\r\n          onClick={onClose}\r\n          className=\"popup__close-button\"\r\n        ></button>\r\n        <h3 className=\"popup__title\">{title}</h3>{\" \"}\r\n        <form action=\"#\" className=\"popup__form\" onSubmit={onSubmit} noValidate>\r\n          {children}\r\n          <button type=\"submit\" className=\"popup__save-button\">\r\n            {buttonText}\r\n          </button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport PopupWithForm from \"./PopupWithForm\";\r\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext.js\";\r\n\r\nexport default function EditProfilePopup({ isOpen, onClose, onUpdateUser }) {\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n\r\n  React.useEffect(() => {\r\n    setName(currentUser.name);\r\n    setDescription(currentUser.about);\r\n  }, [currentUser]);\r\n  const [name, setName] = React.useState(\"\");\r\n\r\n  function handleChangeName(e) {\r\n    setName(e.target.value);\r\n  }\r\n\r\n  const [descriprion, setDescription] = React.useState(\"\");\r\n\r\n  function handleChangeDescription(e) {\r\n    setDescription(e.target.value);\r\n  }\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    onUpdateUser({ name, about: descriprion }); // - не понятно - в каком виде у меня это появляется? вроде во вполне логичном, как есть, но что-то не работает, name читается\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm\r\n      title=\"Редактировать профиль\"\r\n      name=\"profile\"\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      buttonText=\"Сохранить\"\r\n      onSubmit={handleSubmit}\r\n    >\r\n      <input\r\n        name=\"name\"\r\n        type=\"text\"\r\n        id=\"name-input\"\r\n        value={name || \"\"}\r\n        onChange={handleChangeName}\r\n        className=\"popup__input popup__input_name\"\r\n        minLength=\"2\"\r\n        maxLength=\"40\"\r\n        required\r\n      />\r\n      <span id=\"name-input-error\" className=\"popup__input-error\"></span>\r\n      <input\r\n        name=\"about\"\r\n        type=\"text\"\r\n        id=\"self-input\"\r\n        value={descriprion || \"\"}\r\n        onChange={handleChangeDescription}\r\n        className=\"popup__input popup__input_prof\"\r\n        minLength=\"2\"\r\n        maxLength=\"200\"\r\n        required\r\n      />\r\n      <span id=\"self-input-error\" className=\"popup__input-error\"></span>\r\n    </PopupWithForm>\r\n  );\r\n}\r\n","import React from \"react\";\r\n\r\nexport default function ImagePopup({card, onClose}) {\r\n  return (\r\n    <div className={`popup popup_type_image ${card.link && \"popup_open\"}`}>\r\n      <div className=\"popup__container popup__container_img\">\r\n        <button\r\n          type=\"button\"\r\n          className=\"popup__close-button\"\r\n          onClick={onClose}\r\n        ></button>\r\n        <img src={card.link} alt={card.name} className=\"popup__imgSrc\" />\r\n        <h3 className=\"popup__title popup__title_img-container\">{card.name}</h3>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport PopupWithForm from \"./PopupWithForm\";\r\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext.js\";\r\n\r\nexport default function EditAvatarPopup({ isOpen, onClose, onUpdateAvatar }) {\r\n  const avatarRef = React.useRef(\"\");\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    onUpdateAvatar({\r\n      avatar: avatarRef.current.value,\r\n    });\r\n  }\r\n  return (\r\n    <PopupWithForm\r\n      title=\"Обновить аватар\"\r\n      name=\"avatar\"\r\n      children=\"\"\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      buttonText=\"Сохранить\"\r\n      onSubmit={handleSubmit}\r\n    >\r\n      <input\r\n        name=\"link\"\r\n        type=\"url\"\r\n        ref={avatarRef}\r\n        id=\"link-input\"\r\n        className=\"popup__input popup__input_link\"\r\n        placeholder=\"Ссылка на аватар\"\r\n        required\r\n      />\r\n      <span id=\"link-input-error\" className=\"popup__input-error\"></span>\r\n    </PopupWithForm>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport PopupWithForm from \"./PopupWithForm\";\r\nimport { arrCards } from \"../contexts/CardsContext.js\";\r\n\r\nexport default function AddPlacePopup({ isOpen, onClose, onAddPlace }) {\r\n  const cards = React.useContext(arrCards);\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    onAddPlace({ name, link });\r\n  }\r\n\r\n  function handleChangeName(e) {\r\n    setName(e.target.value);\r\n  }\r\n\r\n  function handleChangeLink(e) {\r\n    setLink(e.target.value);\r\n  }\r\n\r\n  const [name, setName] = React.useState();\r\n  const [link, setLink] = React.useState();\r\n\r\n  return (\r\n    <PopupWithForm\r\n      title=\"Новое место\"\r\n      name=\"add\"\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      buttonText=\"Создать\"\r\n      onSubmit={handleSubmit}\r\n    >\r\n      {\" \"}\r\n      <input\r\n        name=\"name\"\r\n        type=\"text\"\r\n        id=\"mark-input\"\r\n        value={name || \"\"}\r\n        onChange={handleChangeName}\r\n        className=\"popup__input popup__input_mark\"\r\n        placeholder=\"Название\"\r\n        minLength=\"1\"\r\n        maxLength=\"30\"\r\n        required\r\n      />\r\n      <span id=\"mark-input-error\" className=\"popup__input-error\"></span>\r\n      <input\r\n        name=\"link\"\r\n        type=\"url\"\r\n        id=\"link-input\"\r\n        value={link || \"\"}\r\n        onChange={handleChangeLink}\r\n        className=\"popup__input popup__input_link\"\r\n        placeholder=\"Ссылка на картинку\"\r\n        required\r\n      />\r\n      <span id=\"link-input-error\" className=\"popup__input-error\"></span>\r\n    </PopupWithForm>\r\n  );\r\n}\r\n","import React from \"react\";\nimport \"../index.css\";\nimport Header from \"./Header.js\";\nimport Main from \"./Main.js\";\nimport Footer from \"./Footer.js\";\nimport PopupWithForm from \"./PopupWithForm.js\";\nimport EditProfilePopup from \"./EditProfilePopup.js\";\nimport ImagePopup from \"./ImagePopup.js\";\nimport { api } from \"../utils/Api.js\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext.js\";\nimport { arrCards } from \"../contexts/CardsContext.js\";\nimport EditAvatarPopup from \"./EditAvatarPopup\";\nimport AddPlacePopup from \"./AddPlacePopup\";\n\nfunction App() {\n  const [currentUser, setCurrentUser] = React.useState({});\n\n  React.useEffect(() => {\n    api\n      .getUserInfo()\n      .then((res) => {\n        setCurrentUser(res);\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }, []);\n\n  function handleEditAvatarClick() {\n    setIsEditAvatarPopupOpen(true);\n  }\n\n  function handleEditProfileClick() {\n    setIsEditProfilePopupOpen(true);\n  }\n\n  function handleAddPlaceClick() {\n    setIsAddPlacePopupOpen(true);\n  }\n\n  function closeAllPopups() {\n    setIsEditProfilePopupOpen(false);\n    setIsEditAvatarPopupOpen(false);\n    setIsAddPlacePopupOpen(false);\n    setSelectedCard({});\n  }\n\n  function handleCardClick(card) {\n    setSelectedCard(card);\n  }\n\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(\n    false\n  );\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = React.useState(\n    false\n  );\n\n  const [selectedCard, setSelectedCard] = React.useState({});\n\n  function handleCardLike(card) {\n    const isLiked = card.likes.some((i) => i._id === currentUser._id);\n    if (!isLiked) {\n      api.likeCard(card._id).then((newCard) => {\n        const newCards = cards.map((c) => (c._id === card._id ? newCard : c));\n\n        setNewCards(newCards);\n      });\n    } else {\n      api.deleteLikeCard(card._id).then((newCard) => {\n        const newCards = cards.map((c) => (c._id === card._id ? newCard : c));\n\n        setNewCards(newCards);\n      });\n    }\n  }\n\n  function handleDeleteCard(card) {\n    // api\n    //   .deleteCard(card._id)\n    //   .then(() => {\n    //     const newCards = cards.filter((c) => {\n    //       return c._id !== card._id;\n    //     });\n    //     setNewCards(newCards);\n    //   })\n    //   .catch((err) => console.log(err));\n  }\n\n  function handleUpdateUser({ name, about }) {\n    api.patchUserInfo({ name, about }).then((res) => {\n      setCurrentUser(res);\n      closeAllPopups();\n    });\n  }\n\n  function handleUpdateAvatar({ avatar }) {\n    api.setNewAvatar({ avatar }).then((res) => {\n      setCurrentUser(res);\n      closeAllPopups();\n    });\n  }\n\n  function handleAddPlaceSubmit({ name, link }) {\n    api.postNewCard({ name, link }).then((newCard) => {\n      setNewCards([newCard, ...cards]);\n      closeAllPopups();\n    });\n  }\n\n  // const isLiked = cards.likes.some(i => i._id === currentUser._id);\n\n  // function handleLikeCard() {\n  //   api.likeCard(cards._id)\n  //   .then(() => {\n\n  //   })\n  // }\n\n  //--------------------- КАРТОЧКИ ----------------//\n\n  const [cards, setNewCards] = React.useState([]);\n\n  React.useEffect(() => {\n    api\n      .getInitialCards()\n      .then((res) => {\n        setNewCards(res);\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }, []);\n\n  return (\n    <div className=\"page\">\n      <CurrentUserContext.Provider value={currentUser}>\n        <arrCards.Provider value={cards}>\n          <EditAvatarPopup\n            isOpen={isEditAvatarPopupOpen}\n            onClose={closeAllPopups}\n            onUpdateAvatar={handleUpdateAvatar}\n          />\n\n          <PopupWithForm\n            title=\"Вы уверены?\"\n            name=\"card-delete\"\n            buttonText=\"Да\"\n          ></PopupWithForm>\n\n          <EditProfilePopup\n            isOpen={isEditProfilePopupOpen}\n            onClose={closeAllPopups}\n            onUpdateUser={handleUpdateUser}\n          />\n\n          <AddPlacePopup\n            isOpen={isAddPlacePopupOpen}\n            onClose={closeAllPopups}\n            onAddPlace={handleAddPlaceSubmit}\n          />\n\n          <ImagePopup card={selectedCard} onClose={closeAllPopups} />\n          <Header />\n          <Main\n            onEditProfile={handleEditProfileClick}\n            onEditAvatar={handleEditAvatarClick}\n            onAddPlace={handleAddPlaceClick}\n            onCardClick={handleCardClick}\n            onLikeClick={handleCardLike}\n            onDeleteCard={handleDeleteCard}\n          />\n          <Footer />\n        </arrCards.Provider>\n      </CurrentUserContext.Provider>\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}